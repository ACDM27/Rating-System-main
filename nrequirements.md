# 辩论赛智能投票系统需求规格说明书 (PRD)

| 文档版本 | v2.0 |
| :--- | :--- |
| 更新日期 | 2026-01-13 |
| 适用端 | 后台管理端、评委端 (Mobile)、观众端 (Mobile)、大屏展示端 |

---

## 1. 项目概述

本系统旨在实现辩论赛全流程的数字化管理。通过 B/S 架构，实现从选手管理、评委打分、观众投票到大屏实时揭晓的完整闭环。系统特别强调**移动端响应式体验**与**现场悬念揭晓**的互动效果。

### 1.1 系统架构
* **架构模式**：B/S (Browser/Server) 全 Web 实现，无需安装 App。
* **用户角色**：
    1.  **管理员** (PC端)：控制流程、管理数据。
    2.  **评委** (移动端)：多维度打分。
    3.  **观众** (移动端)：赛前/赛后投票。
    4.  **大屏** (PC投屏)：展示盲投进度与最终结果。

---

## 2. 核心算法与业务逻辑 (后端开发核心)

### 2.1 个人评分算法 (评委端)
用于评选“优秀辩手”。

* **评分维度 (总分 100分)**：
    * 语言表达 (20分)
    * 逻辑推理 (20分)
    * 辩驳能力 (20分)
    * 临场反应 (15分)
    * 整体意识 (15分)
    * 综合印象 (10分)
* **计算公式**：
    $$\text{选手最终得分} = \frac{\sum(\text{评委总分})}{\text{评委人数}}$$
* **精度要求**：结果保留 **两位小数** (例如：92.33)。
* **同分排名策略 (Tie-Breaker)**：
    为避免排名并列，系统需按以下优先级自动排序：
    1.  **第一优先级**：最终得分 (高者在前)。
    2.  **第二优先级**：**“逻辑推理”**维度的平均分 (高者在前)。
    3.  **第三优先级**：**“辩驳能力”**维度的平均分 (高者在前)。
    4.  **第四优先级**：若以上完全一致，则并列排名。

### 2.2 团队胜负算法 (观众端)
采用**“跑票制 (Swing Vote)”**逻辑，衡量团队的说服力。

* **计算公式**：
    $$\text{跑票值} = \text{赛后得票数} - \text{赛前得票数}$$
* **胜负判定**：
    * 比较正反双方的**跑票值**。
    * 数值大者获胜 (正向增长越多越好，负向流失越少越好)。
    * *示例：正方 +30 票，反方 -30 票，则正方胜。*

---

## 3. 功能模块详解

### 3.1 后台管理端 (Admin Dashboard)
**核心职责**：流程控制中枢，负责“上帝视角”监控。

1.  **基础配置**：
    * **赛事管理**：设置辩题、正方/反方团队名称。
    * **人员绑定**：导入选手名单，并绑定具体辩位 (一辩至四辩)。
2.  **账号体系**：
    * **观众导入**：支持 Excel 批量导入观众名单，生成独立账号/密码 (防止刷票)。
    * **评委生成**：生成评委专属登录链接。
3.  **流程控制器 (State Machine)**：
    * **互斥开关**：【开启赛前投票】、【开启赛后投票】、【开启评委打分】、【关闭通道】。
    * **实时监控**：管理员可见具体的实时票数明细 (用于确认数据是否正常)，但大屏端不显示。
    * **结果揭晓**：提供【一键揭晓】按钮，仅在投票通道关闭后可用。

### 3.2 评委端 (Judge - Mobile Web)
**设计重点**：高效录入，避免移动端表格布局。

1.  **UI 布局**：
    * 采用 **Tabs (正方/反方)** + **Accordion (折叠卡片)** 布局。
    * 点击辩手头像展开评分详情，避免横向滚动表格。
2.  **交互控件**：
    * 输入框类型设为 `type="number"`，自动唤起数字键盘。
    * 增加范围校验 (如：语言分输入 25，提示“最高 20 分”)。
3.  **提交逻辑**：
    * 底部悬浮“提交”按钮，需所有选手打分完毕后才可点击。
    * 提交前需二次确认，提交后不可修改。

### 3.3 观众端 (Audience - Mobile Web)
**设计重点**：极简、防误触。

1.  **UI 布局**：
    * **分屏设计**：左红 (正方) / 右蓝 (反方)，或上下大色块布局。
    * **大按钮**：投票热区高度至少 `60px`。
2.  **业务逻辑**：
    * **双次投票权限**：同一账号在“赛前”和“赛后”各拥有一次投票权。
    * **防抖动**：点击提交后，立即全屏显示 Loading 遮罩，禁用按钮。
    * **状态反馈**：提交成功后显示“投票已锁定，请关注大屏结果”。

### 3.4 大屏展示端 (Display - PC Web)
**设计重点**：盲投模式、悬念与动效。

* **状态 A (盲投引导)**：
    * 显示：巨大的二维码 + 辩题。
    * 数据：**仅显示“已投票人数”** (如 158人)，**绝对不显示**具体票数分布。
* **状态 B (统计等待)**：
    * 显示：“投票通道已关闭，数据封存计算中...”。
* **状态 C (结果揭晓)**：
    * 动作：管理员点击揭晓后触发。
    * 显示：柱状图动态生长动画，显示最终票数对比和个人排行榜。

---

## 4. 移动端响应式适配规范 (UI Guidelines)

开发必须遵循以下规范，以确保 H5 页面接近原生 App 体验：

### 4.1 Viewport 设置
必须在 HTML `<head>` 中添加：
```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">